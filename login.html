<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Acaccia Bistro Cafe - Login</title>
    <link rel="stylesheet" href="customer-ui-style.css">
</head>
<body class="page-login">
    <div class="login-container">
        <div class="image-section">
            <div class="image-placeholder">
                <div class="image-overlay"></div>
                <div class="image-text">Express Yourself.</div>
            </div>
        </div>

        <div class="form-section">
            <div class="welcome-text">
                <h2 id="welcomeTitle">Welcome Back</h2>
                <p id="welcomeSubtext">Enter your credentials to view your account</p>
            </div>

            <div class="login-type-selector">
                <button class="login-type-btn active" id="customerBtn" onclick="switchLoginType('customer')">Customer</button>
                <button class="login-type-btn" id="employeeBtn" onclick="switchLoginType('employee')">Employee</button>
            </div>

            <form id="loginForm">
                <div class="form-group">
                    <label for="email">Email</label>
                    <input type="email" id="email" name="email" placeholder="user@email.com" required>
                </div>

                <div class="form-group">
                    <label for="password">Password</label>
                    <input type="password" id="password" name="password" placeholder="••••••••" required>
                </div>

                <div class="form-group hidden" id="confirmPasswordGroup">
                    <label for="confirmPassword">Confirm Password</label>
                    <input type="password" id="confirmPassword" name="confirmPassword" placeholder="••••••••">
                </div>

                <div class="form-group hidden" id="fullNameGroup">
                    <label for="fullName">Full Name</label>
                    <input type="text" id="fullName" name="fullName" placeholder="Enter your full name">
                </div>

                <div class="form-group hidden" id="phoneGroup">
                    <label for="phone">Phone Number</label>
                    <input type="tel" id="phone" name="phone" placeholder="Enter your phone number">
                </div>

                <div class="forgot-password">
                    <a href="#" id="forgotLink">Forgot your password?</a>
                </div>

                <button type="submit" class="main-button" id="mainButton">Log In</button>
            </form>

            <div class="employee-login" id="employeeLoginLink">
                <button type="button" onclick="switchLoginType('employee')">Login as Employee</button>
            </div>

            <div class="register-link" id="registerLink">
                <a href="#" onclick="toggleMode()">Don't have an account? Sign Up</a>
            </div>
        </div>
    </div>

    <script>
        // This UI-toggling script stays
        let currentLoginType = 'customer';
        let isRegisterMode = false;

        function switchLoginType(type) {
            currentLoginType = type;
            document.getElementById('customerBtn').classList.toggle('active', type === 'customer');
            document.getElementById('employeeBtn').classList.toggle('active', type === 'employee');

            if (type === 'customer') {
                // --- THIS BLOCK IS THE FIX ---
                // Check if we are in register or login mode and set text accordingly
                if (isRegisterMode) {
                    document.getElementById('welcomeTitle').textContent = 'Create Account';
                    document.getElementById('welcomeSubtext').textContent = 'Join our community today';
                    document.getElementById('mainButton').textContent = 'Sign Up';
                } else {
                    document.getElementById('welcomeTitle').textContent = 'Welcome Back';
                    document.getElementById('welcomeSubtext').textContent = 'Enter your credentials to view your account';
                    document.getElementById('mainButton').textContent = 'Log In';
                }
                // --- END OF FIX ---
                
                // Show customer-specific links
                document.getElementById('employeeLoginLink').style.display = 'block';
                document.getElementById('registerLink').style.display = 'block';

            } else {
                // --- Employee Mode ---
                document.getElementById('welcomeTitle').textContent = 'Employee Login';
                document.getElementById('welcomeSubtext').textContent = 'Access employee dashboard';
                document.getElementById('mainButton').textContent = 'Employee Login';
                
                // Hide customer-specific links
                document.getElementById('employeeLoginLink').style.display = 'none';
                document.getElementById('registerLink').style.display = 'none';
                
                // Hide registration fields if they were open and reset mode
                hideRegistrationFields();
                isRegisterMode = false;
            }
        }
        
        function toggleMode() {
            if (currentLoginType !== 'customer') return;
            isRegisterMode = !isRegisterMode;
            if (isRegisterMode) {
                document.getElementById('welcomeTitle').textContent = 'Create Account';
                document.getElementById('welcomeSubtext').textContent = 'Join our community today';
                document.getElementById('mainButton').textContent = 'Sign Up';
                document.getElementById('registerLink').innerHTML = '<a href="#" onclick="toggleMode()">Already have an account? Log In</a>';
                document.getElementById('forgotLink').style.display = 'none';
                showRegistrationFields();
            } else {
                document.getElementById('welcomeTitle').textContent = 'Welcome Back';
                document.getElementById('welcomeSubtext').textContent = 'Enter your credentials to view your account';
                document.getElementById('mainButton').textContent = 'Log In';
                document.getElementById('registerLink').innerHTML = '<a href="#" onclick="toggleMode()">Don\'t have an account? Sign Up</a>';
                document.getElementById('forgotLink').style.display = 'block';
                hideRegistrationFields();
            }
        }
        function showRegistrationFields() {
            document.getElementById('confirmPasswordGroup').classList.remove('hidden');
            document.getElementById('fullNameGroup').classList.remove('hidden');
            document.getElementById('phoneGroup').classList.remove('hidden');
        }
        function hideRegistrationFields() {
            document.getElementById('confirmPasswordGroup').classList.add('hidden');
            document.getElementById('fullNameGroup').classList.add('hidden');
            document.getElementById('phoneGroup').classList.add('hidden');
        }
    </script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            var toggleBtn = document.getElementById('mobile-menu-toggle');
            var menu = document.getElementById('it00l'); // This is the container for .nav-links
    
            if (toggleBtn && menu) {
                toggleBtn.addEventListener('click', function() {
                    // Toggle the 'X' animation on the button
                    this.classList.toggle('is-active');
                    
                    // Toggle the dropdown menu visibility
                    menu.classList.toggle('mobile-menu-active');
                });
            }
        });
    </script>
    <script type="module" src="scripts/firebase.js"></script>
    <script type="module" src="scripts/auth-login.js"></script>
</body>
</html>